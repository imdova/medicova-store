"use client";

import Link from "next/link";
import { JSX, useState, useRef } from "react";

type dataType = {
  id: number;
  title: string;
  url: string;
  icon: JSX.Element;
};

const data: dataType[] = [
  {
    id: 1,
    title: "PPE Protection",
    url: "/",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 47 46"
        fill="none"
      >
        <path
          d="M9.91738 36.6142H17.2017V40.4148H10.6578C10.0971 40.4148 9.64346 40.8684 9.64346 41.4291V44.9857C9.64346 45.5463 10.0971 46 10.6578 46H37.5867C38.1474 46 38.6053 45.5463 38.6053 44.9857V41.4291C38.6053 40.8684 38.1517 40.4148 37.5867 40.4148H31.0428V36.6142H38.3228C42.2988 36.6142 45.5301 33.3829 45.5301 29.407V7.20729C45.5301 3.2313 42.2988 0 38.3228 0H9.92166C5.94567 0 2.71436 3.23558 2.71436 7.20729V29.407C2.71436 33.3829 5.94567 36.6142 9.92166 36.6142H9.91738ZM4.74301 7.21158C4.74301 4.35691 7.06271 2.03722 9.91738 2.03722H38.3186C41.1732 2.03722 43.4929 4.35691 43.4929 7.21158V29.4112C43.4929 32.2659 41.1732 34.5856 38.3186 34.5856H9.91738C7.06271 34.5856 4.74301 32.2659 4.74301 29.4112V7.21158ZM36.5681 43.9713H11.6721V42.4477H36.5681V43.9713ZM19.2347 40.4148V36.6142H29.0056V40.4148H19.2347Z"
          fill="#42a5f5"
        ></path>
        <path
          d="M10.9918 19.6915V23.5306C10.9918 27.5066 14.2232 30.7378 18.1991 30.7378H32.7421C36.7181 30.7378 39.9494 27.5066 39.9494 23.5306V19.7643C40.1934 19.623 40.356 19.3662 40.356 19.0624C40.356 18.7585 40.1934 18.5017 39.9494 18.3605V13.0791C39.9494 9.10312 36.7181 5.87183 32.7421 5.87183H18.1991C14.2232 5.87183 10.9918 9.1074 10.9918 13.0791V18.4332C10.8078 18.583 10.688 18.8056 10.688 19.0624C10.688 19.3192 10.8078 19.5417 10.9918 19.6915ZM18.1991 7.90905H32.7421C35.5968 7.90905 37.9165 10.233 37.9165 13.0834V18.2492H34.0518L32.6737 13.567C32.5752 13.2246 32.2671 12.9935 31.9118 12.985C31.5652 12.9636 31.2399 13.199 31.1243 13.5328L28.6249 20.8171L26.0185 11.1831C25.9329 10.8664 25.6675 10.6353 25.3465 10.5925C25.0213 10.5454 24.7045 10.6995 24.5376 10.982L20.1807 18.2535H13.0205V13.0877C13.0205 10.233 15.3402 7.91332 18.1949 7.91332L18.1991 7.90905ZM32.7421 28.7092H18.1991C15.3445 28.7092 13.0248 26.3895 13.0248 23.5348V19.8798H20.6472C20.9297 19.8798 21.1993 19.73 21.3448 19.4861L24.957 13.46L27.7604 23.8087C27.8545 24.1554 28.1584 24.3994 28.5179 24.4079H28.5436C28.8902 24.4079 29.1984 24.1896 29.3139 23.8601L31.8434 16.4816L32.6737 19.2978C32.7764 19.6402 33.0974 19.8798 33.4526 19.8798H37.9251V23.5348C37.9251 26.3895 35.6054 28.7092 32.7507 28.7092H32.7421ZM39.5471 19.4732H33.4483C33.2686 19.4732 33.1102 19.3534 33.0588 19.1822L31.869 15.1377L28.9245 23.7231C28.8689 23.8858 28.7148 23.9971 28.5393 23.9971V24.1982L28.5265 23.9928C28.3467 23.9885 28.1969 23.8687 28.1498 23.6932L25.0983 12.4243L20.9982 19.2678C20.9254 19.3919 20.7927 19.4647 20.6515 19.4647H11.5054C11.2829 19.4647 11.0988 19.2806 11.0988 19.0581C11.0988 18.8355 11.2829 18.6515 11.5054 18.6515H20.4204L24.8971 11.1831C24.9827 11.0419 25.1411 10.9649 25.2995 10.9905C25.4621 11.0119 25.5948 11.1275 25.6376 11.2859L28.5907 22.1995L31.5181 13.6612C31.5737 13.4985 31.7406 13.383 31.9118 13.3873C32.0916 13.3873 32.2414 13.5071 32.2927 13.6783L33.7564 18.6558H39.5471C39.7697 18.6558 39.9537 18.8398 39.9537 19.0624C39.9537 19.2849 39.7697 19.469 39.5471 19.469V19.4732Z"
          fill="#42a5f5"
        ></path>
      </svg>
    ),
  },
  {
    id: 2,
    title: "Pulse Oximeters",
    url: "/",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 47 46"
        fill="none"
      >
        <path
          d="M34.2486 0.52845C33.5333 1.37883 34.034 2.74977 35.0672 4.12468L32.4246 7.256C30.3901 6.9381 28.2363 7.64939 26.8137 9.33426L11.2406 27.7804C10.1915 29.0242 9.68688 30.6017 9.82596 32.223C9.9412 33.59 10.5055 34.8497 11.4234 35.8391L3.89316 44.7562C3.62295 45.0741 3.66269 45.551 3.98456 45.8212C4.12762 45.9404 4.29848 46 4.46936 46C4.68394 46 4.89852 45.9086 5.04555 45.7338L12.5758 36.8127C13.5891 37.4723 14.7415 37.8022 15.8939 37.8022C17.6264 37.8022 19.351 37.067 20.5551 35.6404L36.1282 17.1943C37.1772 15.9506 37.6819 14.373 37.5428 12.7517C37.4991 12.255 37.3918 11.7742 37.2369 11.3132L39.8714 8.18984C40.1536 8.33687 40.4238 8.46003 40.69 8.56733C41.3378 8.82165 41.8543 8.92099 42.2676 8.92099C42.9312 8.92099 43.3246 8.66669 43.5591 8.38853C44.6916 7.04938 42.7921 4.39887 40.547 2.50737C38.3058 0.615864 35.3771 -0.814679 34.2446 0.524472L34.2486 0.52845ZM39.5774 3.66374C41.7073 5.45987 42.4305 7.00565 42.3948 7.407C42.1921 7.45866 41.6477 7.35931 40.8768 7.00167L40.9682 6.89439C41.0993 6.74339 41.1589 6.5447 41.143 6.34204C41.1271 6.14335 41.0318 5.95659 40.8768 5.82943L37.217 2.74183C36.8991 2.47161 36.4222 2.51134 36.152 2.83322L36.0606 2.94052C35.5798 2.24114 35.3891 1.72058 35.4089 1.51394C35.7984 1.4146 37.4435 1.86761 39.5734 3.66374H39.5774ZM36.0368 12.8828C36.1401 14.1028 35.7626 15.2909 34.9718 16.2247L34.5864 16.6817L33.2472 15.5532C33.0088 15.3505 32.6511 15.3823 32.4485 15.6207C32.2458 15.8591 32.2776 16.2168 32.516 16.4194L33.8552 17.552L32.5399 19.1097L30.1278 17.0751C29.8894 16.8725 29.5318 16.9042 29.3291 17.1427C29.1264 17.3811 29.1582 17.7387 29.3967 17.9414L31.8087 19.9799L30.3583 21.7006L29.0191 20.572C28.7807 20.3694 28.4231 20.4011 28.2204 20.6396C28.0178 20.878 28.0496 21.2356 28.288 21.4383L29.6271 22.5668L28.9675 23.3457L28.3078 24.1245L25.8958 22.09C25.6574 21.8873 25.2997 21.9191 25.0971 22.1575C24.8944 22.396 24.9262 22.7536 25.1646 22.9563L27.5767 24.9948L26.468 26.3101L25.1289 25.1776C24.8904 24.9749 24.5328 25.0067 24.3301 25.2451C24.1275 25.4836 24.1593 25.8412 24.3977 26.0439L25.7368 27.1724L24.4215 28.7301L22.0095 26.6916C21.771 26.4889 21.4134 26.5207 21.2107 26.7591C21.0081 26.9976 21.0399 27.3552 21.2783 27.5579L23.6904 29.5964L22.2399 31.317L20.9008 30.1885C20.6624 29.9858 20.3047 30.0176 20.1021 30.256C19.8994 30.4945 19.9312 30.8521 20.1696 31.0548L21.5088 32.1833L20.1935 33.741L17.7814 31.7025C17.543 31.4998 17.1853 31.5316 16.9827 31.77C16.78 32.0084 16.8118 32.3661 17.0502 32.5687L19.4623 34.6073L19.3987 34.6828C17.7695 36.614 14.8686 36.8604 12.9374 35.2272C12.0036 34.4364 11.4314 33.3317 11.328 32.1118C11.2247 30.8918 11.6022 29.7037 12.393 28.7699L21.9618 17.4327L27.9621 10.3237C28.7529 9.38991 29.8616 8.81767 31.0815 8.71435C31.2127 8.70243 31.3438 8.69847 31.4749 8.69847C32.5558 8.69847 33.589 9.07598 34.4234 9.77934C35.3612 10.5701 35.9295 11.6748 36.0328 12.8947L36.0368 12.8828ZM35.401 8.61106C34.9678 8.24547 34.495 7.95538 33.9983 7.72887L36.8236 4.38299L39.331 6.49702L36.5097 9.83893C36.1997 9.38592 35.8341 8.96869 35.401 8.60708V8.61106Z"
          fill="#42a5f5"
        ></path>
        <path
          d="M23.6521 17.5559C26.243 19.7097 28.8339 21.8675 31.4248 24.0212C31.9135 24.4265 32.6209 23.7272 32.1281 23.3179C29.5372 21.1641 26.9464 19.0064 24.3555 16.8526C23.8667 16.4473 23.1594 17.1466 23.6521 17.5559Z"
          fill="#42a5f5"
        ></path>
      </svg>
    ),
  },
  {
    id: 3,
    title: "Examination Gloves",
    url: "/",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 47 46"
        fill="none"
      >
        <g clipPath="url(#clip0_557_41581)">
          <path
            d="M37.1729 34.4875V20.0739C37.1729 13.7263 32.0079 8.56128 25.6603 8.56128H21.3696C15.022 8.56128 9.85693 13.7263 9.85693 20.0739V34.4875C9.85693 40.8351 15.022 46.0001 21.3696 46.0001H25.6603C32.0079 46.0001 37.1729 40.8351 37.1729 34.4875ZM11.7824 34.4875V33.4615H35.2525V34.4875C35.2525 39.7738 30.9516 44.0797 25.6603 44.0797H21.3696C16.0833 44.0797 11.7774 39.7788 11.7774 34.4875H11.7824ZM21.3696 10.4817H25.6603C30.9466 10.4817 35.2525 14.7826 35.2525 20.0739V20.5439H11.7824V20.0739C11.7824 14.7876 16.0833 10.4817 21.3746 10.4817H21.3696ZM35.2525 22.4644V31.5411H11.7824V22.4644H35.2525Z"
            fill="#42a5f5"
          ></path>
          <path
            d="M30.7951 7.5757C31.3257 7.5757 31.7553 7.14614 31.7553 6.61549V0.960241C31.7553 0.429589 31.3257 0 30.7951 0H16.24C15.7094 0 15.2798 0.429589 15.2798 0.960241V6.61549C15.2798 7.14614 15.7094 7.5757 16.24 7.5757H30.7951ZM17.2002 1.92045H29.8399V5.65525H17.2002V1.92045Z"
            fill="#42a5f5"
          ></path>
        </g>
        <defs>
          <clipPath id="clip0_557_41581">
            <rect
              width="46"
              height="46"
              fill="white"
              transform="translate(0.856934)"
            ></rect>
          </clipPath>
        </defs>
      </svg>
    ),
  },
  {
    id: 4,
    title: "Medicine",
    url: "/",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 47 46"
        fill="none"
      >
        <path
          d="M13.904 33.6186C14.5458 40.5496 20.463 46 27.6497 46C35.2629 46 41.4518 39.8833 41.4518 32.3647V25.244C43.6537 24.3973 45.2185 22.2921 45.2185 19.8214C45.2185 16.6103 42.5761 14.0008 39.3248 14.0008C36.0734 14.0008 33.431 16.6103 33.431 19.8214C33.431 22.2181 34.9068 24.277 37.0057 25.17V32.3601C37.0057 37.4542 32.8079 41.5999 27.6497 41.5999C22.9132 41.5999 18.9965 38.102 18.3875 33.5862C25.1526 32.4943 29.8517 26.6321 29.8517 18.8451V2.19776C29.8517 0.98553 28.8538 0 27.6263 0C27.1203 0 26.6565 0.175829 26.2817 0.458066C25.8554 0.217471 25.3635 0.0786624 24.8387 0.0786624C23.2271 0.0786624 21.92 1.37417 21.92 2.96117C21.92 4.54818 23.2318 5.84368 24.8387 5.84368C25.0308 5.84368 25.2182 5.82518 25.401 5.78816V18.8405C25.401 25.0404 21.5639 29.3758 16.0684 29.3758C10.5729 29.3758 6.73591 25.0451 6.73591 18.8405V5.82981C6.82023 5.83907 6.90458 5.84368 6.98891 5.84368C8.60055 5.84368 9.90766 4.54818 9.90766 2.96117C9.90766 1.37417 8.59587 0.0786624 6.98891 0.0786624C6.53915 0.0786624 6.11282 0.185077 5.72865 0.365524C5.37727 0.138809 4.96029 0 4.51053 0C3.28306 0 2.28516 0.98553 2.28516 2.19776V18.8451C2.28516 26.6922 7.0545 32.5868 13.8993 33.614L13.904 33.6186ZM3.62509 2.207C3.62509 1.72118 4.0233 1.32791 4.51522 1.32791C5.00714 1.32791 5.40538 1.72118 5.40538 2.207V18.8544C5.40538 25.8316 9.79052 30.7037 16.0731 30.7037C22.3557 30.7037 26.7409 25.8316 26.7409 18.8544V2.207C26.7409 1.72118 27.1391 1.32791 27.631 1.32791C28.1229 1.32791 28.5211 1.72118 28.5211 2.207V18.8544C28.5211 26.7385 23.288 32.4619 16.0778 32.4619C8.86758 32.4619 3.63444 26.7385 3.63444 18.8544V2.207H3.62509ZM8.13205 2.97043C8.13205 3.59043 7.62139 4.09475 6.9936 4.09475C6.90459 4.09475 6.82024 4.08087 6.74059 4.06236V2.20236C6.74059 2.09132 6.72185 1.9849 6.7078 1.88311C6.8015 1.85998 6.89522 1.84149 6.9936 1.84149C7.62139 1.84149 8.13205 2.34581 8.13205 2.9658V2.97043ZM23.7003 2.97043C23.7003 2.35044 24.211 1.84612 24.8387 1.84612C25.0543 1.84612 25.251 1.90625 25.4197 2.00804C25.415 2.07282 25.401 2.13759 25.401 2.207V3.94669C25.2323 4.03923 25.0449 4.09938 24.8387 4.09938C24.211 4.09938 23.7003 3.59506 23.7003 2.97507V2.97043ZM38.3409 32.3693V19.7982C38.3409 19.3124 38.7392 18.9191 39.2311 18.9191C39.723 18.9191 40.1212 19.3124 40.1212 19.7982V32.3693C40.1212 39.1615 34.5273 44.686 27.6497 44.686C21.25 44.686 15.9607 39.8972 15.2626 33.7574C15.5297 33.7713 15.7967 33.7805 16.0731 33.7805C16.4057 33.7805 16.7337 33.7667 17.057 33.7435C17.741 38.9163 22.2292 42.9278 27.6544 42.9278C33.5482 42.9278 38.3456 38.1899 38.3456 32.3693H38.3409ZM39.3248 15.3241C41.8406 15.3241 43.8833 17.346 43.8833 19.826C43.8833 21.5518 42.8947 23.0509 41.4518 23.8051V19.7936C41.4518 18.5814 40.4539 17.5959 39.2264 17.5959C37.9989 17.5959 37.001 18.5814 37.001 19.7936V23.694C35.6658 22.9075 34.7616 21.4685 34.7616 19.826C34.7616 17.3414 36.8089 15.3241 39.3201 15.3241H39.3248Z"
          fill="#42a5f5"
        ></path>
      </svg>
    ),
  },
  {
    id: 5,
    title: "Medical Supplies",
    url: "/",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 44 43"
        fill="none"
      >
        <path
          d="M9.92548 43C15.0006 43 19.1288 38.725 19.1288 33.4693C19.1288 31.7725 18.6926 30.1088 17.8663 28.6508C17.8379 28.4561 17.8166 28.2578 17.7918 28.0595C17.8911 28.0007 17.9868 27.9309 18.0791 27.8538L22.037 24.4161L25.729 27.6224C25.995 27.8538 26.3071 28.008 26.6369 28.0778C26.6156 28.2688 26.5944 28.4598 26.566 28.6508C25.7396 30.1088 25.3034 31.7725 25.3034 33.4693C25.3034 38.725 29.4316 43 34.5068 43C39.5819 43 43.7101 38.725 43.7101 33.484C43.7172 33.0543 43.8697 22.9287 41.4758 18.8924C40.1104 15.8514 37.1419 13.8902 33.9039 13.8902C29.5132 13.8902 25.9063 17.416 25.5801 21.8746L24.2926 20.7544V2.15221C24.2926 0.965926 23.3599 0 22.2143 0C21.0688 0 20.1361 0.965926 20.1361 2.15221V20.4459L18.8238 21.5845C18.3663 17.2617 14.8197 13.8865 10.5249 13.8865C7.28683 13.8865 4.32189 15.8477 2.95292 18.8887C0.558982 22.925 0.711488 33.0507 0.718582 33.4657C0.718582 38.7213 4.8468 42.9963 9.92194 42.9963L9.92548 43ZM4.46376 19.671C5.54901 17.2213 7.92876 15.6384 10.5284 15.6384C14.2026 15.6384 17.1924 18.7345 17.1924 22.5394C17.1924 22.701 17.1853 22.8626 17.1747 23.0205L15.4085 24.5557C14.9829 24.923 14.724 25.4445 14.6743 26.0174C14.6247 26.5904 14.7949 27.1486 15.1496 27.5893C15.4085 27.9089 15.7454 28.1329 16.1213 28.2541C16.1533 28.5332 16.1852 28.816 16.2277 29.0915C16.2455 29.2053 16.2845 29.3118 16.3412 29.4073C17.0612 30.6267 17.4442 32.0333 17.4442 33.4693C17.4442 37.7627 14.0714 41.2555 9.92548 41.2555C5.77954 41.2555 2.40675 37.7627 2.40675 33.451C2.40675 33.3518 2.25425 23.3327 4.41411 19.7665C4.43185 19.7334 4.44958 19.7004 4.46731 19.6673L4.46376 19.671ZM21.8242 21.3898V2.15589C21.8242 1.93552 22.0051 1.74821 22.2179 1.74821C22.4307 1.74821 22.6116 1.93552 22.6116 2.15589V21.5698L27.3179 25.6575C27.481 25.8007 27.5023 26.0615 27.3675 26.2341C27.2789 26.3443 27.1618 26.37 27.1015 26.3773C27.0412 26.3847 26.9207 26.3773 26.8143 26.2855L22.0406 22.1391L17.0009 26.5169C16.8945 26.6087 16.7739 26.6161 16.7136 26.6087C16.6533 26.6014 16.5363 26.5757 16.4476 26.4655C16.359 26.3553 16.3519 26.2304 16.359 26.168C16.3625 26.1056 16.3909 25.9844 16.4973 25.8925L21.349 21.68C21.3667 21.6653 21.388 21.6543 21.4057 21.6396L21.8278 21.3898H21.8242ZM27.2398 22.5394C27.2398 18.7345 30.2296 15.6384 33.9074 15.6384C36.507 15.6384 38.8868 17.2213 39.9685 19.671C39.9827 19.7041 40.0004 19.7408 40.0217 19.7702C42.1816 23.3364 42.0291 33.3518 42.0291 33.4693C42.0291 37.7627 38.6563 41.2555 34.5103 41.2555C30.3644 41.2555 26.9916 37.7627 26.9916 33.4693C26.9916 32.0333 27.3711 30.6267 28.0946 29.4073C28.1513 29.3118 28.1903 29.2017 28.2081 29.0915C28.2825 28.614 28.3357 28.1292 28.3748 27.6444C28.4776 27.56 28.5734 27.4608 28.6585 27.3543C29.3962 26.4435 29.2791 25.0846 28.3996 24.3243L27.2895 23.3621C27.2576 23.0903 27.2398 22.8148 27.2398 22.5394Z"
          fill="#42a5f5"
        ></path>
        <path
          d="M29.7214 30.5572C29.968 31.0601 30.4612 31.3705 31.0076 31.3705C31.2352 31.3705 31.4591 31.3154 31.6601 31.2054C32.7984 30.6043 33.5685 29.681 33.891 28.5377C34.4867 26.42 33.3409 24.3141 33.2081 24.0823C32.8059 23.3751 31.9257 23.1393 31.239 23.5519C30.5561 23.9644 30.3209 24.8799 30.7192 25.591C30.9355 25.98 31.3187 27.0054 31.1176 27.7087C31.019 28.0544 30.7724 28.3216 30.3474 28.5495C29.6417 28.9227 29.3572 29.8224 29.7176 30.5572H29.7214ZM30.8406 29.5474C31.5312 29.182 31.9713 28.6713 32.1572 28.0269C32.4721 26.9268 31.9675 25.5871 31.6564 25.0331C31.5577 24.8563 31.6146 24.6245 31.7853 24.5223C31.8423 24.487 31.9068 24.4712 31.9675 24.4712C32.0889 24.4712 32.2103 24.538 32.2786 24.652C32.3203 24.7266 33.3295 26.53 32.8553 28.2273C32.62 29.0681 32.0358 29.7557 31.1745 30.2114C31 30.3018 30.7761 30.2271 30.6889 30.0503C30.5978 29.8657 30.6699 29.6417 30.8444 29.5474H30.8406Z"
          fill="#42a5f5"
        ></path>
        <path
          d="M12.8688 31.2096C13.0699 31.3157 13.2975 31.3746 13.5214 31.3746C14.0677 31.3746 14.5571 31.0642 14.8075 30.5613C15.168 29.8266 14.8872 28.9269 14.1777 28.5536C13.7528 28.3297 13.5062 28.0625 13.4076 27.7128C13.2065 27.0096 13.5897 25.9841 13.8059 25.5951C14.2043 24.884 13.9691 23.9686 13.2862 23.556C12.6032 23.1435 11.7192 23.3792 11.3171 24.0864C11.1843 24.3182 10.0385 26.4241 10.6341 28.5418C10.9566 29.6891 11.7268 30.6085 12.865 31.2096H12.8688ZM12.5615 24.4715C12.6222 24.4715 12.6867 24.4872 12.7436 24.5225C12.9143 24.6247 12.9713 24.8565 12.8726 25.0333C12.5615 25.5873 12.0569 26.9271 12.3718 28.0272C12.5539 28.6715 12.9978 29.1823 13.6883 29.5477C13.8666 29.6419 13.9349 29.8659 13.8477 30.0506C13.7604 30.2274 13.5366 30.3059 13.362 30.2116C12.497 29.7559 11.9165 29.0683 11.6813 28.2275C11.2032 26.5302 12.2124 24.7308 12.2542 24.6522C12.3225 24.5343 12.4401 24.4715 12.5653 24.4715H12.5615Z"
          fill="#42a5f5"
        ></path>
      </svg>
    ),
  },
  {
    id: 6,
    title: "Wound Care",
    url: "/",
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 47 46"
        fill="none"
      >
        <g clipPath="url(#clip0_557_41610)">
          <path
            d="M20.337 41.2109L22.7711 43.4858C22.7711 43.4858 22.8133 43.5233 22.8367 43.542L23.0333 43.6965C23.2346 43.8603 23.4827 43.9399 23.7261 43.9399C24.0023 43.9399 24.2784 43.8369 24.4937 43.6356L27.087 41.2109C44.6594 24.7993 46.4476 15.1378 46.5646 14.3982C46.6676 13.8505 46.7144 13.3778 46.7144 12.9003C46.7144 7.43758 41.2657 3 34.5672 3C29.7037 3 25.6687 7.89163 23.7167 12.0998C21.7647 7.89631 17.7251 3 12.8615 3C6.16302 3 0.714355 7.44226 0.714355 12.9003C0.714355 13.3684 0.76116 13.8458 0.854779 14.3514C0.915632 14.7539 1.3931 17.3472 3.99104 21.8269C7.43625 27.7718 12.9364 34.2971 20.3417 41.2109H20.337ZM12.8568 5.21881C17.6689 5.21881 21.8349 12.1092 22.626 15.648C22.7384 16.1536 23.1924 16.5187 23.712 16.5187C24.2316 16.5187 24.681 16.1583 24.798 15.648C25.5891 12.1092 29.7552 5.21881 34.5672 5.21881C40.0393 5.21881 44.4909 8.664 44.4909 12.9003C44.4909 13.2373 44.4535 13.5884 44.3739 14.005C44.3739 14.0237 44.3692 14.0424 44.3645 14.0612C44.3505 14.1548 42.8713 23.4278 25.5704 39.5866L23.7167 41.3186L21.8583 39.5866C4.55743 23.4278 3.10634 14.3888 3.05485 14.0097C3.05485 13.991 3.05019 13.9769 3.0455 13.9582C2.97529 13.579 2.93782 13.2373 2.93782 12.9003C2.93782 8.664 7.38944 5.21881 12.8615 5.21881H12.8568Z"
            fill="#42a5f5"
          ></path>
        </g>
        <defs>
          <clipPath id="clip0_557_41610">
            <rect
              width="46"
              height="46"
              fill="white"
              transform="translate(0.714355)"
            ></rect>
          </clipPath>
        </defs>
      </svg>
    ),
  },
];

const CategorySlider = () => {
  const sliderRef = useRef<HTMLDivElement>(null);
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isDragging, setIsDragging] = useState(false);
  const [startX, setStartX] = useState(0);
  const [scrollLeft, setScrollLeft] = useState(0);

  // Calculate how many cards are visible based on screen size
  const getVisibleCardsCount = () => {
    if (typeof window === "undefined") return 4;
    if (window.innerWidth < 640) return 1;
    if (window.innerWidth < 768) return 2;
    if (window.innerWidth < 1024) return 3;
    return 4;
  };

  const visibleCards = getVisibleCardsCount();

  const scrollToIndex = (index: number) => {
    if (!sliderRef.current) return;

    const cardWidth = sliderRef.current.scrollWidth / data.length;
    const newScrollPosition = index * cardWidth * visibleCards;

    sliderRef.current.scrollTo({
      left: newScrollPosition,
      behavior: "smooth",
    });

    setCurrentIndex(index);
  };

  const nextSlide = () => {
    const maxIndex = Math.ceil(data.length / visibleCards) - 1;
    const newIndex = currentIndex >= maxIndex ? 0 : currentIndex + 1;
    scrollToIndex(newIndex);
  };

  const prevSlide = () => {
    const maxIndex = Math.ceil(data.length / visibleCards) - 1;
    const newIndex = currentIndex <= 0 ? maxIndex : currentIndex - 1;
    scrollToIndex(newIndex);
  };

  // Touch and mouse event handlers for drag scrolling
  const handleMouseDown = (e: React.MouseEvent) => {
    if (!sliderRef.current) return;
    setIsDragging(true);
    setStartX(e.pageX - sliderRef.current.offsetLeft);
    setScrollLeft(sliderRef.current.scrollLeft);
  };

  const handleMouseLeave = () => {
    setIsDragging(false);
  };

  const handleMouseUp = () => {
    setIsDragging(false);
  };

  const handleMouseMove = (e: React.MouseEvent) => {
    if (!isDragging || !sliderRef.current) return;
    e.preventDefault();
    const x = e.pageX - sliderRef.current.offsetLeft;
    const walk = (x - startX) * 2; // Scroll-fastness
    sliderRef.current.scrollLeft = scrollLeft - walk;
  };

  // Touch event handlers
  const handleTouchStart = (e: React.TouchEvent) => {
    if (!sliderRef.current) return;
    setIsDragging(true);
    setStartX(e.touches[0].pageX - sliderRef.current.offsetLeft);
    setScrollLeft(sliderRef.current.scrollLeft);
  };

  const handleTouchMove = (e: React.TouchEvent) => {
    if (!isDragging || !sliderRef.current) return;
    const x = e.touches[0].pageX - sliderRef.current.offsetLeft;
    const walk = (x - startX) * 2;
    sliderRef.current.scrollLeft = scrollLeft - walk;
  };

  const handleTouchEnd = () => {
    setIsDragging(false);
  };

  return (
    <div className="animate-on-scroll slide-up relative translate-y-10 py-12 opacity-0 transition-all duration-700 ease-in-out">
      <div className="group mx-auto max-w-[1300px]">
        {/* Previous button */}
        <button
          onClick={prevSlide}
          className="absolute top-1/2 left-0 z-10 flex h-10 w-10 -translate-y-1/2 cursor-pointer items-center justify-center rounded-full bg-white opacity-0 shadow-md transition-colors group-hover:opacity-100 hover:bg-gray-100"
          aria-label="Previous categories"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            className="h-6 w-6 text-gray-600"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M15 19l-7-7 7-7"
            />
          </svg>
        </button>

        {/* Next button */}
        <button
          onClick={nextSlide}
          className="absolute top-1/2 right-0 z-10 flex h-10 w-10 -translate-y-1/2 cursor-pointer items-center justify-center rounded-full bg-white opacity-0 shadow-md transition-colors group-hover:opacity-100 hover:bg-gray-100"
          aria-label="Next categories"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            className="h-6 w-6 text-gray-600"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M9 5l7 7-7 7"
            />
          </svg>
        </button>

        {/* Slider container */}
        <div
          ref={sliderRef}
          className="cursor-grab overflow-x-hidden scroll-smooth py-2 whitespace-nowrap active:cursor-grabbing"
          onMouseDown={handleMouseDown}
          onMouseLeave={handleMouseLeave}
          onMouseUp={handleMouseUp}
          onMouseMove={handleMouseMove}
          onTouchStart={handleTouchStart}
          onTouchMove={handleTouchMove}
          onTouchEnd={handleTouchEnd}
        >
          <div className="inline-flex justify-center space-x-7">
            {data.map((category) => (
              <Link
                href={category.url}
                className="flex w-[160px] shrink-0 flex-col items-center sm:w-[190px]"
                key={`${category.id}`}
              >
                <div className="mb-4 flex h-[80px] w-[80px] items-center justify-center rounded-full bg-[#42a4f522] sm:h-[100px] sm:w-[100px]">
                  {category.icon}
                </div>
                <h3 className="font-semibold transition">{category.title}</h3>
              </Link>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

export default CategorySlider;
